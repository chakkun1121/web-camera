<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>カメラアプリ | chakkun1121</title>
    <link href="./style/tailwind.css" rel="stylesheet" />
    <link rel="manifest" href="manifest.json" />
    <link rel="canonical" href="https://chakkun1121.github.io/web-camera" />
    <meta name="theme-color" content="#ddd" />
    <meta
      name="description"
      content="chakkun1121が作成したウェブカメラです。このアプリでは画像はローカルで処理するので安全です。また、このアプリでは全画面表示ができるのでスクリーンに投影する際などにご利用いただけます。"
    />
  </head>

  <body>
    <header class="absolute inset-x-0 top-0 z-20 bg-white bg-opacity-50 p-2">
      <h1>カメラ</h1>
    </header>
    <main>
      <video
        id="video"
        class="absolute left-1/2 top-1/2 h-full w-full -translate-x-1/2 -translate-y-1/2 object-cover"
      ></video>
    </main>
    <canvas id="canvas" style="display: none"></canvas>
    <nav
      class="absolute inset-y-0 right-0 z-10 grid flex-col content-center items-center bg-white bg-opacity-25 p-2"
    >
      <div class="p-2">
        <button onclick="takePicture()" aria-label="撮影">
          <svg
            class="h-6 w-6"
            version="1.1"
            viewBox="0 0 512 512"
            class="nav-button"
            xml:space="preserve"
          >
            <g>
              <path
                d="M256,0C114.618,0,0.009,114.61,0,256c0.009,141.39,114.618,255.991,256,256   c141.381-0.008,255.991-114.61,256-256C511.992,114.61,397.382,0,256,0z M412.82,99.189c27.299,27.315,47.467,61.66,57.606,100.108   c-61.944-25.359-117.251-37.345-161.258-42.57c-23.053-2.733-43.004-3.619-59.202-3.619c-7.456,0-14.084,0.184-19.885,0.468   c26.387-32.08,62.07-68.045,109.378-103.042C367.116,61.777,392.024,78.402,412.82,99.189z M256.008,34.236   c20.094,0,39.536,2.716,58.041,7.723c-50.719,39.293-87.754,79.38-114.075,113.916h-0.084l-3.327,4.455   c-20.261,27.106-33.818,50.468-42.251,66.858c-14.569-38.9-27.892-87.737-34.504-146.138   C157.413,51.738,204.613,34.244,256.008,34.236z M34.236,256c0.008-61.268,24.807-116.642,64.953-156.811l0.476-0.452   c9.011,66.249,26.271,120.11,43.731,160.824c13.365,31.126,26.847,54.58,36.835,70.077c-40.972-6.812-89.944-19.71-143.864-43.196   C35.004,276.486,34.236,266.34,34.236,256z M99.189,412.811c-27.299-27.306-47.467-61.66-57.606-100.091   c61.944,25.351,117.251,37.337,161.258,42.561c23.053,2.733,43.004,3.61,59.202,3.61c7.456,0,14.084-0.183,19.885-0.468   c-26.388,32.08-62.07,68.054-109.386,103.059C144.892,450.232,119.985,433.607,99.189,412.811z M256.008,477.773   c-20.101,0-39.543-2.717-58.04-7.732c50.71-39.285,87.746-79.372,114.066-113.908h0.084l3.327-4.455   c20.252-27.09,33.801-50.434,42.226-66.826c14.593,38.892,27.908,87.729,34.528,146.105   C354.596,460.27,307.395,477.764,256.008,477.773z M412.82,412.811l-0.476,0.452c-9.011-66.216-26.279-120.068-43.764-160.79v0.017   c-13.34-31.16-26.814-54.614-36.81-70.127c40.972,6.821,89.944,19.717,143.873,43.205c1.362,9.955,2.131,20.102,2.131,30.433   C477.764,317.275,452.966,372.65,412.82,412.811z"
              />
            </g>
          </svg>
        </button>
      </div>
      <div class="p-2">
        <button onclick="showCamerasList()" aria-label="カメラの切り替え">
          <svg
            class="h-6 w-6"
            version="1.1"
            viewBox="0 0 512 512"
            xml:space="preserve"
          >
            <g>
              <path
                d="M403.925,108.102c-27.595-27.595-62.899-47.558-102.459-56.29L304.182,0L201.946,53.867l-27.306,14.454   l-5.066,2.654l8.076,4.331l38.16,20.542l81.029,43.602l2.277-42.859c28.265,7.546,53.438,22.53,73.623,42.638   c29.94,29.939,48.358,71.119,48.358,116.776c0,23.407-4.843,45.58-13.575,65.687l40.37,17.532   c11.076-25.463,17.242-53.637,17.242-83.219C465.212,198.306,441.727,145.904,403.925,108.102z"
              />
              <path
                d="M296.256,416.151l-81.101-43.612l-2.272,42.869c-28.26-7.555-53.51-22.53-73.618-42.636   c-29.945-29.95-48.364-71.12-48.364-116.767c0-23.427,4.844-45.522,13.576-65.697l-40.37-17.531   c-11.076,25.53-17.242,53.723-17.242,83.228c0,57.679,23.407,110.157,61.21,147.893c27.595,27.594,62.899,47.548,102.453,56.202   l-2.716,51.9l102.169-53.878l27.455-14.454l4.988-2.643l-7.999-4.332L296.256,416.151z"
              />
            </g>
          </svg>
        </button>
      </div>
      <div class="p-2">
        <button onclick="showFullScreen()" aria-label="全画面表示">
          <svg
            class="h-6 w-6"
            version="1.1"
            viewBox="0 0 512 512"
            xml:space="preserve"
          >
            <g>
              <polygon
                points="30.291,174.821 30.291,51.704 164.736,186.154 186.151,164.735 51.706,30.294 174.819,30.294 
      		174.819,0 0.002,0 0.005,174.821"
              ></polygon>
              <polygon
                points="337.177,0 337.177,30.294 460.294,30.294 325.848,164.743 347.263,186.154 481.713,51.704 
      		481.713,174.821 511.998,174.821 511.998,0"
              ></polygon>
              <polygon
                points="164.736,325.847 30.291,460.288 30.291,337.17 0.005,337.179 0.002,512 174.819,512 174.819,481.706 
      		51.706,481.706 186.155,347.266"
              ></polygon>
              <polygon
                points="481.713,460.288 347.263,325.839 325.844,347.266 460.294,481.706 337.177,481.706 337.177,512 
      		511.998,512 511.998,337.179 481.705,337.187"
              ></polygon>
            </g>
          </svg>
        </button>
      </div>
    </nav>
    <div
      class="absolute left-1/2 top-1/2 z-50 hidden -translate-x-1/2 -translate-y-1/2 transform rounded border bg-white p-2"
      id="camerasListPopupMain"
    >
      <h1>使用可能なカメラ一覧</h1>
      <ul id="camerasList" class="cursor-pointer list-none"></ul>
    </div>
    <footer>
      <a></a>
    </footer>
    <script src="script/script.js" defer></script>
    <script src="script/video.js" defer></script>
    <script>
      if ("serviceWorker" in navigator) {
        navigator.serviceWorker
          .register("sw.js")
          .then(function (registration) {
            // 登録成功
            console.log(
              "ServiceWorker の登録に成功しました。スコープ: ",
              registration.scope,
            );
          })
          .catch(function (err) {
            // 登録失敗
            console.log("ServiceWorker の登録に失敗しました。", err);
          });
      }
    </script>
  </body>
</html>
